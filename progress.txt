# Mission Control -- Progress Tracker
# Read this file at the start of every session to understand current state.
# Update this file at the end of every session with what was done.

## Current Version: 0.9.0

## Current Phase: Foundation COMPLETE, preparing for Phase 2 (Agent Runtime)

## Last Session: February 8, 2026

### What was done this session:
- Created PRD v2.0 (docs/PRD_V2.md) with corrected architecture, state machine, phasing
- Created SDD documentation stack:
  - .cursorrules (AI operating manual for Cursor sessions)
  - docs/TECH_STACK.md (locked dependency versions)
  - docs/FRONTEND_GUIDELINES.md (design system extracted from codebase)
  - docs/APP_FLOW.md (all dashboard views, navigation, modals)
  - docs/BACKEND_STRUCTURE.md (Convex schema and API surface)
  - progress.txt (this file)
- Reorganized documentation: moved 20+ root-level .md files into docs/ subdirectories
  - docs/architecture/ -- system design docs
  - docs/guides/ -- getting started, deployment, configuration
  - docs/planning/ -- implementation plans, epics, roadmaps
  - docs/changelog/ -- version history, status reports
  - docs/runbook/ -- operational runbook
- Updated README.md to reflect actual architecture and new doc structure

### What is working:
- Convex backend: 18 tables, 60+ queries, 50+ mutations, cron jobs
- React dashboard: Kanban, agent management, approvals, analytics, monitoring, live feed
- State machine: 8 states with validated transitions
- Policy engine: GREEN/YELLOW/RED risk classification
- Budget enforcement: per-agent daily, per-task, per-run
- Loop detection: comment storms, review ping-pong, repeated failures (cron)
- Emergency controls: pause squad, quarantine, drain, resume
- Telegram bot: approvals, squad commands, daily CEO briefs
- Agent runner: register, heartbeat, claim tasks (proto-runtime)
- OpenClaw SDK: external agent integration
- Multi-project workspace support
- Docker Compose deployment

### What is broken / known issues:
- AgentDashboard.tsx references Tailwind classes but Tailwind is not configured
- Convex SDK version mismatch: root uses ^1.31.7, UI uses ^1.14.0
- No test files exist for any package
- packages/state-machine uses lowercase states (inbox) but schema uses uppercase (INBOX)
- Loop detection: backAndForthLimit config is defined but the detection logic is not implemented
- agentLearning.ts: recordTaskCompletion and discoverPattern are stubs

### What is next (Phase 2 priorities):
1. Decide: server-side orchestration process (Express/Hono) vs. Convex-only
2. Evolve packages/agent-runner into packages/agent-runtime with persona loading
3. Create agent persona YAML files in agents/ directory
4. Build Coordinator orchestration logic (packages/coordinator)
5. Build memory system on existing agentDocuments/agentLearning tables
6. Add unit tests for state-machine and policy-engine packages
7. Implement heartbeat recovery flow (detect -> alert -> terminate -> reassign)
8. Add FAILED terminal state to task state machine (or document decision not to)

### Architecture decisions made:
- Backend is Convex-native (no Express API server)
- Real-time via Convex reactive subscriptions (no WebSocket/SSE)
- Background jobs via Convex crons (no standalone worker processes)
- Phase 2 will add a server-side orchestration process for long-running agent loops
- Model router will ship Claude-only first (Phase 3), add other providers in Phase 4+
- Consensus mode (multi-model voting) deferred to Phase 5

### Key file locations:
- PRD: docs/PRD_V2.md
- Schema: convex/schema.ts
- State machine: packages/state-machine/src/
- Policy engine: packages/policy-engine/src/
- Agent runner: packages/agent-runner/src/
- Dashboard: apps/mission-control-ui/src/
- Cron jobs: convex/crons.ts
- Cursor rules: .cursorrules
